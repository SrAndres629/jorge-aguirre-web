# PROJECT STRUCTURE MAP: Jorge Aguirre Web

This map serves as a technical guide for developers and AI agents to understand the architecture and flow of the project.

## ğŸ“‚ Directory Overview

### ğŸ—ï¸ `/core` (The Heart)
Contains the entire web application logic and static assets.
- **`/app`**: Python backend logic (FastAPI).
  - `main.py`: Entry point for the FastAPI application.
  - `database.py`: Hybrid DB management (PostgreSQL / SQLite).
  - `config.py`: Settings and environment variable validation.
  - `routes/`: Modular API and Page endpoints.
- **`/database`**: Local data and migrations.
  - `local_fallback.db`: SQLite database for local dev/fallback.
  - `migrations/`: SQL scripts for schema updates.
- **`/static`**: Frontend assets (CSS, JS, Images).
- **`/templates`**: Jinja2 HTML templates.

### ğŸ¤– `/automation`
Contains n8n workflows and automation logic for the Natalia CRM.

### ğŸ“œ `/scripts`
Utility scripts for maintenance, cleanup, and deployment assistance.

### ğŸ—ï¸ `/infrastructure`
Dockerfiles and configuration for supporting services (Redis, Evolution API, MCP).

### ğŸ“‘ `/docs`
Project documentation, requirements, and design guides.

---

## ğŸ”‘ Key Files & Functions

| File | Purpose | Build Context |
| :--- | :--- | :--- |
| `Dockerfile` | Multi-stage production build. | Root (`.`) |
| `docker-compose.yml` | Full stack orchestration (Web, Worker, Redis, Evolution, n8n). | Root (`.`) |
| `.env` | Environment secrets (Not committed). | N/A |
| `README.md` | General landing and setup instructions. | N/A |
| `RENDER_DEPLOY_FIX.md`| Post-mortem and config guide for Render. | N/A |

---

## âš™ï¸ Docker Architecture

The project is designed to be built from the **Repository Root (`.`)**.
- Render must point its **Root Directory** to the repo root (blank).
- All `COPY` instructions in the `Dockerfile` assume paths relative to the root (e.g., `COPY core/ .`).

## ğŸ› ï¸ Editing Tips
1. **Adding Routes**: Place new logic in `core/app/routes/` and register in `core/app/main.py`.
2. **Database Changes**: Update `core/app/database.py` and add a migration in `core/database/migrations/`.
3. **Frontend**: Modify `core/static/` for assets or `core/templates/` for HTML. Always test with `docker-compose up`.

---
*Generated by Antigravity - Lead DevOps*
